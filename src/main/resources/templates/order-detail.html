<!doctype html>
<html class="no-js" lang="en" xmlns:th="http://www.thymeleaf.org">


<!-- Mirrored from new.axilthemes.com/demo/template/etrade/my-account.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 11 Sep 2024 10:15:16 GMT -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Home Page</title>
    <meta name="robots" content="noindex, follow"/>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" th:href="@{/images/favicon.png}">

    <!-- CSS
    ============================================ -->

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" th:href="@{/css/vendor/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/css/vendor/font-awesome.css}">
    <link rel="stylesheet" th:href="@{/css/vendor/flaticon/flaticon.css}">
    <link rel="stylesheet" th:href="@{/css/vendor/slick.css}">
    <link rel="stylesheet" th:href="@{/css/vendor/slick-theme.css}">
    <link rel="stylesheet" th:href="@{/css/vendor/jquery-ui.min.css}">
    <link rel="stylesheet" th:href="@{/css/vendor/sal.css}">
    <link rel="stylesheet" th:href="@{/css/vendor/magnific-popup.css}">
    <link rel="stylesheet" th:href="@{/css/vendor/base.css}">
    <link rel="stylesheet" th:href="@{/css/style.min.css}">
    <link rel="stylesheet" th:href="@{/css/style-2.css}">
</head>

<style>
    #close-model-btn {
        width: 20px;
        height: 20px;
        display: flex;
        justify-content: center;
        align-items: center;
        border-radius: 100%;
        padding: 15px;
        font-size: 18px;
        font-weight: 300;
        transition: .3s all ease;
    }

    #close-model-btn:hover {
        background-color: #f3f3f3;
    }

    #rating-modal {
        -webkit-transition: opacity 1s ease;
        -moz-transition: opacity 1s ease;
        -ms-transition: opacity 1s ease;
        -o-transition: opacity 1s ease;
        transition: opacity 1s ease-in-out;
        opacity: 0;
    }

    #rate-product:disabled:hover {
        background: var(--color-primary);
        color: var(--color-white);
    }
</style>

<body class="sticky-header">

<!-- Include Header Fragment -->
<div th:replace="base :: header"></div>
<!-- End Header -->

<main class="main-wrapper" th:attr="order-id=${orderId}">

    <!-- Start My Account Area  -->
    <div class="axil-dashboard-area axil-section-gap">
        <div class="container">
            <div class="axil-dashboard-warp">
                <!-- Dashboard Sidebar -->
                <div class="row">
                    <div class="col-xl-3 col-md-4">
                        <aside class="axil-dashboard-aside">
                            <nav class="axil-dashboard-nav">
                                <div class="nav nav-tabs" role="tablist">
                                    <a class="nav-item nav-link" href="my-account.html"
                                       aria-selected="false"><i class="fas fa-user"></i>Tài khoản</a>
                                    <a class="nav-item nav-link" href="my-shop.html"
                                       aria-selected="false"><i class="fas fa-store"></i>Cửa hàng</a>
                                    <a class="nav-item nav-link active" href="order.html"
                                       aria-selected="true"><i class="fas fa-shopping-basket"></i>Đơn hàng</a>
                                    <a class="nav-item nav-link" href="wallet.html"
                                       aria-selected="false"><i class="fas fa-wallet"></i>Ví</a>
                                    <a class="nav-item nav-link" href="address.html"
                                       aria-selected="false"><i class="fas fa-home"></i>Địa chỉ</a>
                                    <a class="nav-item nav-link" href="notification.html"
                                       aria-selected="false"><i class="fas fa-bell"></i>Thông báo</a>
                                </div>
                            </nav>
                        </aside>
                    </div>
                    <!-- Dashboard Content -->
                    <div class="col-xl-9 col-md-8">
                        <div class="tab-content">
                            <!-- Order Details Tab -->
                            <div id="nav-order-detail" class="tab-pane fade show active" role="tabpanel">
                                <div class="order-detail axil-dashboard-order">
                                    <h4 style="text-align: center">Mã: <span
                                            id="order-id" th:text="${trackingNumber}"></span></h4>
                                    <h4 style="text-align: center">Trạng thái: <span
                                            id="status-order" th:text="${shippingStatus}"></span></h4>
                                    <div class="order-progress"
                                         th:if="${shippingStatus} != 'Cancelled' and ${shippingStatus} != 'Returned'">
                                        <div th:classappend="${pendingTime != null or confirmedTime != null} ? 'active' : ''"
                                             class="order-progress-step">
                                            <i class="flaticon-calendar"></i>
                                            <p class="order-status">Đơn hàng</p>
                                            <small th:text="${confirmedTime == null} ? 'Chờ xác nhận' : 'Đơn hàng đã đặt'"></small><br>
                                            <small id="order-placed-date"
                                                   th:text="${confirmedTime == null ? #temporals.format(pendingTime, 'HH:mm dd-MM-yyyy') : #temporals.format(confirmedTime, 'HH:mm dd-MM-yyyy')}">
                                            </small>
                                        </div>
                                        <div th:classappend="${processingTime != null or dispatchedTime != null} ? 'active' : ''"
                                             class="order-progress-step">
                                            <i class="flaticon-box"></i>
                                            <p class="order-status">Xử lý</p>
                                            <small th:if="${processingTime != null}"
                                                   th:text="${dispatchedTime == null} ? 'Đang gói hàng' : 'Đã giao cho vận chuyển'"></small><br>
                                            <small id="payment-confirmed-date"
                                                   th:text="${dispatchedTime == null ? #temporals.format(processingTime, 'HH:mm dd-MM-yyyy') : #temporals.format(dispatchedTime, 'HH:mm dd-MM-yyyy')}"></small>
                                        </div>
                                        <div th:classappend="${shippingTime != null or failedTime != null} ? 'active' : ''"
                                             class="order-progress-step">
                                            <i class="flaticon-truck"></i>
                                            <p class="order-status">Vận chuyển</p>
                                            <small th:if="${shippingTime != null}"
                                                   th:text="${failedTime == null} ? 'Đang giao hàng' : 'Giao hàng thất bại'"></small><br>
                                            <small id="shipped-date"
                                                   th:text="${failedTime == null ? #temporals.format(shippingTime, 'HH:mm dd-MM-yyyy') : #temporals.format(failedTime, 'HH:mm dd-MM-yyyy')}"></small>
                                        </div>
                                        <div th:classappend="${deliveredTime != null} ? 'active' : ''"
                                             class="order-progress-step">
                                            <i class="flaticon-quality"></i>
                                            <p class="order-status">Đã giao</p>
                                            <small th:if="${deliveredTime != null}"
                                                   th:text="'Đã giao hàng'"></small><br>
                                            <small id="delivered-date"
                                                   th:text="${#temporals.format(deliveredTime, 'HH:mm dd-MM-yyyy')}"></small>
                                        </div>
                                        <div th:classappend="${completedTime != null} ? 'active' : ''"
                                             class="order-progress-step">
                                            <i class="flaticon-star"></i>
                                            <p class="order-status">Hoàn tất</p>
                                            <small th:if="${completedTime != null}"
                                                   th:text="'Đơn hàng đã hoàn thành'"></small><br>
                                            <small id="completed-date" th:if="${completedTime != null}"
                                                   th:text="${#temporals.format(completedTime, 'HH:mm dd-MM-yyyy')}"></small>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-5">
                                            <div class="order-info">
                                                <p class="text-left" th:text="'Địa chỉ: ' + ${shippingAddress}"></p>
                                                <!-- Align text to the left -->
                                            </div>
                                        </div>
                                        <div class="col-7">
                                            <div class="order-actions text-right"
                                                 style="display: flex; justify-content: end;">
                                                <!-- Khi hang da giao muon danh gia(khi da nhan duoc hang va xac nhan) -->
                                                <input th:if="${shippingStatus == 'Delivered'}" type="submit"
                                                       id="rate-product"
                                                       class="axil-btn btn-bg-secondary btn-sm"
                                                       value="đánh giá đơn hàng">
                                                <!-- Huy don hang(chi hien thi khi chua nhan hang) -->
                                                <input type="submit" id="cancel-order"
                                                       class="axil-btn btn-bg-secondary btn-sm"
                                                       style="background-color: red; border: none; margin-left: 10px;"
                                                       value="Huy don hang">
                                                <!-- yeu cau hoan tra tien(khi da nhan hang) -->
                                                <input type="submit" id="refund-order"
                                                       class="axil-btn btn-bg-secondary btn-sm"
                                                       style="background-color: red; border: none; margin-left: 10px;"
                                                       value="Yeu cau hoan tra tien">
                                            </div>
                                        </div>
                                    </div>
                                    <br>
                                    <div class="container">
                                        <div class="axil-dashboard-author">
                                            <div class="media">
                                                <div class="thumbnail">
                                                    <a th:href="@{/view-store/{storeId}(storeId=${storeId})}"><img
                                                            th:src="${storeImage}" alt="Store Image"
                                                            class="author-image"></a>
                                                </div>
                                                <div class="media-body-1">
                                                    <div class="info-row">
                                                        <a href="view-store.html"><span
                                                                class="name"><h3
                                                                th:text="${storeName}"></h3></span></a>
                                                    </div>
                                                    <div class="info-row">
                                                        <a th:href="@{/view-store/{storeId}(storeId=${storeId})}"><i
                                                                class="flaticon-shop hover-flip-item"> Xem cửa hàng</i></a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div th:each="detail : ${orderDetails}">
                                        <a th:href="@{/product-detail/{productId}(productId=${detail.productId})}">
                                            <div class="product-card">
                                                <div class="product-left">
                                                    <img th:src="${detail.productImage}" alt="Product Image"
                                                         class="product-image">
                                                    <div class="product-info">
                                                        <h2 class="product-name" th:text="${detail.productName}"></h2>
                                                        <p class="product-brand"
                                                           th:text="'Phân loại hàng: '+ ${detail.categoryName}"></p>
                                                        <p class="product-category"
                                                           th:text="'Loại: '+ ${detail.sizeAndColor}"></p>
                                                        <p class="product-category"
                                                           th:text="'Số lượng: '+ ${detail.quantity}"></p>
                                                        <!--                                                <span class="product-policies">15 Days Returns | 15 Days Free Returns</span>-->
                                                    </div>
                                                </div>
                                                <div class="product-right">
                                                <span class="product-price"
                                                      th:text="${detail.productTotalPrice}"></span>
                                                    <span class="original-price"
                                                          th:text="${detail.productTotalPrice}"></span><br>
                                                    <span class="shop-rating"
                                                          th:text="${detail.avgRating} + ' ★'"></span>
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                    <div class="summary">
                                        <div class="summary-row">
                                            <span class="summary-label">Phí sản phẩm</span>
                                            <span class="summary-value"
                                                  th:text="${totalAmount}"></span>
                                        </div>
                                        <div class="summary-row">
                                            <span class="summary-label">Phí vận chuyển</span>
                                            <span class="summary-value"
                                                  th:text="${shippingFee}"></span>
                                        </div>
                                        <!--                                        <div class="summary-row">-->
                                        <!--                                            <span class="summary-label">Tax(10%)</span>-->
                                        <!--                                            <span class="summary-value">10$</span>-->
                                        <!--                                        </div>-->
                                        <!--                                        <div class="summary-row">-->
                                        <!--                                            <span class="summary-label">Voucher from Shop</span>-->
                                        <!--                                            <span class="summary-value">-5$</span>-->
                                        <!--                                        </div>-->
                                        <div class="summary-row">
                                            <span class="summary-label total">Tổng chi phí</span>
                                            <span th:if="${totalAmount != null and shippingFee != null}"
                                                  th:text="${totalAmount + shippingFee}">0</span>
                                            <span th:if="${totalAmount == null or shippingFee == null}">0</span>

                                        </div>
                                    </div>
                                    <div class="payment-method">
                                        <p th:text="${paymentMethod}"></p>
                                    </div>
                                </div>
                            </div>
                        </div> <!-- End of tab-content -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Confirm Delivery Modal -->
    <div id="confirmDeliveryModal" class="modal" style="display:none;">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Bạn đã nhận được hàng?</h2>
            <form>
                <button type="submit">Xác nhận</button>
            </form>
        </div>
    </div>
    <!-- Rating Modal -->
    <div id="rateProductModal" class="modal" style="display:none;">
        <div class="modal-content" style="width: 500px; padding: 32px;" id="rating-modal">
            <div class="close"
                 style="display: flex; justify-content: end; position: relative; top: -10px; right: -10px"><i
                    class="close fa fa-times" id="close-model-btn"></i></div>
            <h2>Đánh giá của bạn</h2>
            <form id="rateForm">
                <label for="feedback-text">Nhập đánh giá của bạn:</label>
                <input type="text" id="feedback-text" name="feedback-text" style="padding: 0 14px"><br><br>
                <label for="rating">Đánh giá:</label>
                <select id="rating" class="form-select">
                    <option value="5">★★★★★</option>
                    <option value="4">★★★★☆</option>
                    <option value="3">★★★☆☆</option>
                    <option value="2">★★☆☆☆</option>
                    <option value="1">★☆☆☆☆</option>
                </select>
                <button type="submit" class="mt-5" style="padding: 14px 0">Xác nhận</button>
            </form>
        </div>
    </div>
    <!-- Pending Modal -->
    <div id="pendingConfirmationModal" class="modal" style="display:none;">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Xác nhận thông tin</h2>
            <form id="pendingForm">
                <label for="reason-name">Lý do mà bạn gửi yêu cầu:</label>
                <input type="text" id="reason-name" name="reason-name" required><br><br>
                <button type="submit">Gửi</button>
            </form>
        </div>
    </div>
    <!-- Success Modal -->
    <div id="successModal-rating" class="modal" style="display:none;">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Đánh Giá Thành Công!</h2>
        </div>
    </div>
    <!-- Success pending Modal -->
    <div id="successModal-pending" class="modal" style="display:none;">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Thành Công!</h2>
            <p>Yêu cầu của bạn đã được gửi tới người bán.</p>
        </div>
    </div>
</main>


<div class="service-area">
    <div class="container">
        <div class="row row-cols-xl-4 row-cols-sm-2 row-cols-1 row--20">
            <div class="col">
                <div class="service-box service-style-2">
                    <div class="icon">
                        <img th:src="@{/images/icons/service1.png}" alt="Service">
                    </div>
                    <div class="content">
                        <h6 class="title">Fast &amp; Secure Delivery</h6>
                        <p>Tell about your service.</p>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="service-box service-style-2">
                    <div class="icon">
                        <img th:src="@{/images/icons/service2.png}" alt="Service">
                    </div>
                    <div class="content">
                        <h6 class="title">Money Back Guarantee</h6>
                        <p>Within 10 days.</p>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="service-box service-style-2">
                    <div class="icon">
                        <img th:src="@{/images/icons/service3.png}" alt="Service">
                    </div>
                    <div class="content">
                        <h6 class="title">24 Hour Return Policy</h6>
                        <p>No question ask.</p>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="service-box service-style-2">
                    <div class="icon">
                        <img th:src="@{/images/icons/service4.png}" alt="Service">
                    </div>
                    <div class="content">
                        <h6 class="title">Pro Quality Support</h6>
                        <p>24/7 Live support.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Start Footer Area  -->
<footer class="axil-footer-area footer-style-2">
    <!-- Start Footer Top Area  -->
    <div class="footer-top separator-top">
        <div class="container">
            <div class="row">
                <!-- Start Single Widget  -->
                <div class="col-lg-6 col-sm-6">
                    <div class="axil-footer-widget">
                        <h5 class="widget-title">Support</h5>
                        <div class="inner">
                            <p>685 Market Street, Las Vegas, LA 95820</p>
                            <ul class="support-list-item">
                                <li><a href="mailto:example@domain.com"><i class="fal fa-envelope-open"></i>
                                    example@domain.com</a></li>
                                <li><a href="tel:(+01)850-315-5862"><i class="fal fa-phone-alt"></i> (+01) 850-315-5862</a>
                                </li>
                                <!-- <li><i class="fal fa-map-marker-alt"></i> 685 Market Street,  <br> Las Vegas, LA 95820, <br> United States.</li> -->
                            </ul>
                        </div>
                    </div>
                </div>
                <!-- End Single Widget  -->
                <!-- Start Single Widget  -->
                <div class="col-lg-6 col-sm-6">
                    <div class="axil-footer-widget">
                        <h5 class="widget-title">Account</h5>
                        <div class="inner">
                            <ul>
                                <li><a href="my-account.html">My Account</a></li>
                                <li><a href="sign-up.html">Login / Register</a></li>
                                <li><a href="cart-detail.html">Cart</a></li>
                                <li><a href="wishlist.html">Wishlist</a></li>
                                <li><a href="product-list.html">Shop</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <!-- End Single Widget  -->
            </div>
        </div>
    </div>
    <!-- End Footer Top Area  -->
</footer>
<!-- End Footer Area  -->

<!-- Header Search Modal End -->
<!-- JS
============================================ -->
<!-- Modernizer JS -->
<script th:src="@{/js/vendor/modernizr.min.js}"></script>
<!-- jQuery JS -->
<script th:src="@{/js/vendor/jquery.js}"></script>
<!-- Bootstrap JS -->
<script th:src="@{/js/vendor/popper.min.js}"></script>
<script th:src="@{/js/vendor/bootstrap.min.js}"></script>
<script th:src="@{/js/vendor/slick.min.js}"></script>
<script th:src="@{/js/vendor/js.cookie.js}"></script>
<!-- <script src="assets/js/vendor/jquery.style.switcher.js"></script> -->
<script th:src="@{/js/vendor/jquery-ui.min.js}"></script>
<script th:src="@{/js/vendor/jquery.ui.touch-punch.min.js}"></script>
<script th:src="@{/js/vendor/jquery.countdown.min.js}"></script>
<script th:src="@{/js/vendor/sal.js}"></script>
<script th:src="@{/js/vendor/jquery.magnific-popup.min.js}"></script>
<script th:src="@{/js/vendor/imagesloaded.pkgd.min.js}"></script>
<script th:src="@{/js/vendor/isotope.pkgd.min.js}"></script>
<script th:src="@{/js/vendor/counterup.js}"></script>
<script th:src="@{/js/vendor/waypoints.min.js}"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<!-- Main JS -->
<script th:src="@{/js/main.js}"></script>
<script th:src="@{/js/script.js}"></script>
<script>
    // Đóng tất cả các modal
    function closeAllModals() {
        document.getElementById('confirmDeliveryModal').style.display = "none";
        document.getElementById('rateProductModal').style.display = "none";
        document.getElementById('pendingConfirmationModal').style.display = "none";
        document.getElementById('successModal-rating').style.display = "none";
        document.getElementById('successModal-pending').style.display = "none";
    }

    // Hiển thị modal xác nhận đã nhận hàng
    document.getElementById('rate-product').addEventListener('click', function () {
        closeAllModals();
        document.getElementById('rateProductModal').style.display = "block";
        document.getElementById('rating-modal').style.opacity = '1';
        // document.getElementById('confirmDeliveryModal').style.display = "block";
    });

    // Khi xác nhận đã nhận hàng, mở modal đánh giá
    document.querySelector('#confirmDeliveryModal button[type="submit"]').addEventListener('click', function (event) {
        event.preventDefault(); // Ngăn không tải lại trang khi submit form
        closeAllModals();
        document.getElementById('rateProductModal').style.display = "block";
    });

    // Khi người dùng xác nhận đánh giá, mở modal thành công và reload trang
    document.getElementById('rateForm').addEventListener('submit', function (event) {
        event.preventDefault(); // Ngăn không tải lại trang khi submit form
        closeAllModals();

        const feedbackText = document.getElementById('feedback-text').value;
        const rating = document.getElementById('rating').value;

        const orderId = document.querySelector(".main-wrapper[order-id]").getAttribute("order-id")

        fetch(`http://localhost:8080/order-detail/${orderId}/rating?rateText=${feedbackText}&rateStar=${rating}`, {
            method: "GET",
        }).then(res => {
            if (res.status === 200) {
                Swal.fire({
                    title: "Success!",
                    text: "Rate order successfully.",
                    icon: "success",
                    showConfirmButton: false,
                    showCancelButton: false,
                    timer: 2000,
                });
                document.getElementById('feedback-text').value = "";
                document.getElementById('rating').value = "";
                document.getElementById('rate-product').disabled = true;
            } else {
                Swal.fire({
                    icon: "error",
                    title: "Oops...",
                    text: "Something went wrong!",
                    confirmButtonColor: "#3085d6",
                    footer: '<a href="#">Why do I have this issue?</a>'
                });
            }
        })
    });

    // Khi nhấn "Hủy đơn hàng" hoặc "Yêu cầu hoàn trả", mở modal yêu cầu lý do
    document.getElementById('cancel-order').addEventListener('click', function () {
        closeAllModals();
        document.getElementById('pendingConfirmationModal').style.display = "block";
    });

    document.getElementById('refund-order').addEventListener('click', function () {
        closeAllModals();
        document.getElementById('pendingConfirmationModal').style.display = "block";
    });

    // Sau khi nhập lý do và gửi yêu cầu, hiển thị modal thành công và reload trang
    document.getElementById('pendingForm').addEventListener('submit', function (event) {
        event.preventDefault(); // Ngăn không tải lại trang khi submit form
        closeAllModals();
        document.getElementById('successModal-pending').style.display = "block";

        // Sau 2 giây reload lại trang
        setTimeout(function () {
            location.reload();
        }, 2000);
    });

    // Đóng modal khi nhấn nút close (dấu "x")
    var closeButtons = document.getElementsByClassName('close');
    for (var i = 0; i < closeButtons.length; i++) {
        closeButtons[i].onclick = function () {
            closeAllModals();
        };
    }
</script>
</body>


<!-- Mirrored from new.axilthemes.com/demo/template/etrade/my-account.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 11 Sep 2024 10:15:17 GMT -->
</html>