<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Danh sách nhân viên | Kênh người bán</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Main CSS -->
    <link rel="stylesheet" th:href="@{/seller/css/main.css}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css">
    <!-- or -->
    <link rel="stylesheet" href="https://unpkg.com/boxicons@latest/css/boxicons.min.css">

    <!-- Font-icon seller -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.css">
</head>

<body onload="time()" class="app sidebar-mini rtl">
<!-- Navbar-->
<header class="app-header">
    <!-- Sidebar toggle button--><a class="app-sidebar__toggle" href="#" data-toggle="sidebar"
                                    aria-label="Hide Sidebar"></a>
    <!-- Navbar Right Menu-->
    <ul class="app-nav">


        <!-- User Menu-->
        <li><a class="app-nav__item" href="/dashboard.html"><i class='bx bx-log-out bx-rotate-180'></i> </a>

        </li>
    </ul>
</header>
<!-- Sidebar menu-->
<div class="app-sidebar__overlay" data-toggle="sidebar"></div>
<aside class="app-sidebar">
    <div class="app-sidebar__user"><img class="app-sidebar__user-avatar" src="#" width="50px"
                                        alt="User Image">
    </div>
    <hr>
    <ul class="app-menu">
        <li><a class="app-menu__item" th:href="@{'/store-info/' + ${storeId}}"><i
                class='app-menu__icon bx bx-info-square'></i><span
                class="app-menu__label">Thông tin cửa hàng</span></a></li>
        <li><a class="app-menu__item active" href="/seller/dashboard"><i
                class='app-menu__icon bx bx-tachometer'></i><span
                class="app-menu__label">Bảng điều khiển</span></a></li>
        <li><a class="app-menu__item" th:href="@{'/seller-products/' + ${storeId}}"><i
                class='app-menu__icon bx bx-purchase-tag-alt'></i><span class="app-menu__label">Quản lý sản phẩm</span></a>
        </li>

        <li><a class="app-menu__item" th:href="@{'/seller/order-manager/' + ${storeId}}"><i
                class='app-menu__icon bx bx-task'></i><span
                class="app-menu__label">Quản lý đơn hàng</span></a></li>
        <li><a class="app-menu__item" href="feedback-manager.html"><i
                class='app-menu__icon bx bx-list-minus'></i><span class="app-menu__label">Quản lý đánh giá</span></a>
        </li>
        <li><a class="app-menu__item" href="shipping-manager.html"><i
                class='app-menu__icon bx bx-run'></i><span class="app-menu__label">Quản lý vận chuyển</span></a>
        </li>
        <li><a class="app-menu__item" href="income-manager.html"><i
                class='app-menu__icon bx bx-pie-chart-alt-2'></i><span class="app-menu__label">Báo cáo doanh thu</span></a>
        </li>
    </ul>
</aside>
<main class="app-content">
    <div class="row">
        <div class="col-md-12">
            <div class="app-title">
                <ul class="app-breadcrumb breadcrumb">
                    <li class="breadcrumb-item"><a href="#"><b>Bảng điều khiển</b></a></li>
                </ul>
                <div id="clock"></div>
            </div>
        </div>
    </div>
    <div class="row">
        <!--Left-->
        <div class="col-md-12 col-lg-6">
            <div class="row">
                <div class="col-md-12" style="text-align: right">
                    <!-- Phần input date -->
                    <div id="errorMessage" class="alert alert-danger" style="display: none;"></div>
                    <div class="form-group d-flex align-items-center gap-3 mb-3" style="margin-left: 10%">
                        <label class="control-label">Từ ngày:</label>
                        <input class="form-control" style="width: 150px; margin-left: 5px; margin-right: 5px;"
                               type="date" id="startDate">

                        <label class="control-label">Đến ngày:</label>
                        <input class="form-control" style="width: 150px; margin-left: 5px; margin-right: 5px;"
                               type="date" id="endDate">
                    </div>

                    <!-- Button xuống dòng và căn trái -->
                    <div class="form-group">
                        <button class="btn btn-primary" onclick="filterData()">
                            <i class="fa fa-fw fa-lg fa-search"></i>Lọc dữ liệu
                        </button>
                    </div>
                </div>
                <!-- col-6 -->
                <div class="col-md-12">
                    <div class="widget-small primary coloured-icon"><i class='icon fa-3x bx bxs-chart'></i>
                        <div class="info">
                            <h4>Tổng thu nhập</h4>
                            <p><b th:text="${totalRevenue} + ' đ'"></b></p>
                        </div>
                    </div>
                </div>
                <!-- col-6 -->
                <div class="col-md-6">
                    <div class="widget-small info coloured-icon"><i class='icon bx bxs-purchase-tag-alt fa-3x'></i>
                        <div class="info">
                            <h4>Tổng sản phẩm</h4>
                            <p><b th:text="${totalProducts} + ' sản phẩm'"></b></p>
                        </div>
                    </div>
                </div>
                <!-- col-6 -->
                <div class="col-md-6">
                    <div class="widget-small warning coloured-icon"><i class='icon bx bxs-shopping-bags fa-3x'></i>
                        <div class="info">
                            <h4>Tổng đơn hàng</h4>
                            <p><b th:text="${totalOrders} +' đơn hàng'"></b></p>
                        </div>
                    </div>
                </div>
                <!-- col-6 -->
                <div class="col-md-6">
                    <div class="widget-small primary coloured-icon"><i class='icon bx bxs-shopping-bag-alt fa-3x'></i>
                        <div class="info">
                            <h4>Đơn hàng thành công</h4>
                            <p><b th:text="${totalOrdersCompleted} +' đơn hàng'"></b></p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="widget-small danger coloured-icon"><i class='icon fa-3x bx bxs-receipt'></i>
                        <div class="info">
                            <h4>Đơn hàng hủy và hoàn trả</h4>
                            <p><b th:text="${totalOrdersCancelledAndReturned} +' đơn hàng'"></b></p>
                        </div>
                    </div>
                </div>
                <!-- col-12 -->
                <div class="col-md-12">
                    <div class="tile">
                        <div>
                            <h3 class="tile-title">SẢN PHẨM BÁN CHẠY</h3>
                        </div>
                        <div class="tile-body">
                            <table class="table table-hover table-bordered" id="sampleTable">
                                <thead>
                                <tr>
                                    <th>Mã sản phẩm</th>
                                    <th>Tên sản phẩm</th>
                                    <th>Giá tiền</th>
                                    <th>Danh mục</th>
                                    <th>Đã bán</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr th:each="products : ${bestSellingProducts}">
                                    <td th:text="${products.productCode}"></td>
                                    <td th:text="${products.productName}"></td>
                                    <td th:text="${products.price} +' đ'"></td>
                                    <td th:text="${products.category}"></td>
                                    <td th:text="${products.quantitySold}"></td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <!-- / div trống-->
                    </div>
                </div>
                <!-- / col-12 -->
            </div>
        </div>
        <!--END left-->
        <!--Right-->
        <div class="col-md-12 col-lg-6">
            <div class="row">
<!--                <div class="col-md-12">-->
<!--                    <div class="tile">-->
<!--                        <h3 class="tile-title">Dữ liệu 6 tháng đầu vào</h3>-->
<!--                        <div class="embed-responsive embed-responsive-16by9">-->
<!--                            <canvas class="embed-responsive-item" id="lineChartDemo"></canvas>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
                <div class="col-md-12">
                    <div class="tile">
                        <h3 class="tile-title">Thống kê 6 tháng doanh thu</h3>
                        <div class="embed-responsive embed-responsive-16by9">
                            <canvas class="embed-responsive-item" id="barChartDemo"></canvas>
                        </div>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="tile">
                        <h3 class="tile-title">Biểu đồ tỷ lệ đơn hàng</h3>
                        <div class="embed-responsive embed-responsive-16by9">
                            <canvas class="embed-responsive-item" id="pieChartDemo"></canvas>
                        </div>
                    </div>
                </div>
<!--                <div class="col-md-12">-->
<!--                    <div class="tile">-->
<!--                        <h3 class="tile-title">Thống kê 6 tháng doanh thu</h3>-->
<!--                        <div class="embed-responsive embed-responsive-16by9">-->
<!--                            <canvas class="embed-responsive-item" id="doughnutChartDemo"></canvas>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--                <div class="col-md-12">-->
<!--                    <div class="tile">-->
<!--                        <h3 class="tile-title">Thống kê 6 tháng doanh thu</h3>-->
<!--                        <div class="embed-responsive embed-responsive-16by9">-->
<!--                            <canvas class="embed-responsive-item" id="polarAreaChartDemo"></canvas>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
                <div class="col-md-12">
                    <div class="tile">
                        <h3 class="tile-title">Đánh giá sản phẩm</h3>
                        <div class="embed-responsive embed-responsive-16by9">
                            <canvas class="embed-responsive-item" id="radarChartDemo"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--END right-->
    </div>
</main>
<script th:src="@{/seller/js/jquery-3.2.1.min.js}"></script>
<!--===============================================================================================-->
<script th:src="@{/seller/js/popper.min.js}"></script>
<script src="https://unpkg.com/boxicons@latest/dist/boxicons.js"></script>
<!--===============================================================================================-->
<script th:src="@{/seller/js/bootstrap.min.js}"></script>
<!--===============================================================================================-->
<script th:src="@{/seller/js/main.js}"></script>
<!--===============================================================================================-->
<script th:src="@{/seller/js/plugins/pace.min.js}"></script>
<!--===============================================================================================-->
<script th:src="@{/seller/js/plugins/chart.js}" type="text/javascript"></script>
<!--===============================================================================================-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
<script type="text/javascript">
    var data = {
        labels: ["Tháng 11"],
        datasets: [{
            label: "Dữ liệu đầu tiên",
            fillColor: "rgba(255, 213, 59, 0.5), 212, 59)",
            strokeColor: "rgb(255, 212, 59)",
            pointColor: "rgb(255, 212, 59)",
            pointStrokeColor: "rgb(255, 212, 59)",
            pointHighlightFill: "rgb(255, 212, 59)",
            pointHighlightStroke: "rgb(255, 212, 59)",
            data: [3000]
        },
        ]
    };
    // var ctxl = $("#lineChartDemo").get(0).getContext("2d");
    // var lineChart = new Chart(ctxl).Line(data);

    var ctxb = $("#barChartDemo").get(0).getContext("2d");
    var barChart = new Chart(ctxb).Bar(data);
    var pieData = [
        {value: [[${totalOrdersCompleted}]], color: "#01ff02", highlight: "#007b01", label: "Hoàn thành"},
        {value: [[${totalOrdersCancelledAndReturned}]], color: "#b10000", highlight: "#ff0000", label: "Hủy và hoàn trả"},
    ];
    var ctxp = document.getElementById("pieChartDemo").getContext("2d");
    var pieChart = new Chart(ctxp).Pie(pieData);
    // var ctxd = document.getElementById("doughnutChartDemo").getContext("2d");
    // var doughnutChart = new Chart(ctxd).Doughnut(pieData);
    // Dữ liệu cho biểu đồ cực
    // var polarData = [
    //     {value: [[${totalOrdersCancelledAndReturned}]], color: "#F7464A", highlight: "#FF5A5E", label: "Dữ liệu 1"},
    //     {value: 80, color: "#46BFBD", highlight: "#5AD3D1", label: "Dữ liệu 2"},
    //     {value: 100, color: "#FDB45C", highlight: "#FFC870", label: "Dữ liệu 3"},
    //     {value: 90, color: "#949FB1", highlight: "#A8B3C5", label: "Dữ liệu 4"}
    // ];
    //
    // // Biểu đồ cực
    // var ctxpo = document.getElementById("polarAreaChartDemo").getContext("2d");
    // var polarAreaChart = new Chart(ctxpo).PolarArea(polarData);

    // Dữ liệu cho biểu đồ radar
    var radarData = {
        labels: ["5 sao", "4 sao", "3 sao", "2 sao", "1 sao"],
        datasets: [
            {
                label: "feedback",
                fillColor: "rgba(76, 175, 80, 0.65)",
                strokeColor: "rgb(76, 175, 80)",
                pointColor: "rgb(76, 175, 80)",
                data: [3, 2, 1, 0, 0]
            },
            {
                label: "4 sao",
                fillColor: "rgba(139, 195, 74, 0.65)",
                strokeColor: "rgb(139, 195, 74)",
                pointColor: "rgb(139, 195, 74)",
                data: [2]
            },
            {
                label: "3 sao",
                fillColor: "rgba(255, 235, 59, 0.65)",
                strokeColor: "rgb(255, 235, 59)",
                pointColor: "rgb(255, 235, 59)",
                data: [0]
            },
            {
                label: "2 sao",
                fillColor: "rgba(255, 193, 7, 0.65)",
                strokeColor: "rgb(255, 193, 7)",
                pointColor: "rgb(255, 193, 7)",
                data: [0]
            },
            {
                label: "1 sao",
                fillColor: "rgba(244, 67, 54, 0.65)",
                strokeColor: "rgb(244, 67, 54)",
                pointColor: "rgb(244, 67, 54)",
                data: [0]
            }
        ]
    };

    // Biểu đồ radar
    var ctxr = document.getElementById("radarChartDemo").getContext("2d");
    var radarChart = new Chart(ctxr).Radar(radarData);
</script>
<script type="text/javascript">
    //Thời Gian
    function time() {
        var today = new Date();
        var weekday = new Array(7);
        weekday[0] = "Chủ Nhật";
        weekday[1] = "Thứ Hai";
        weekday[2] = "Thứ Ba";
        weekday[3] = "Thứ Tư";
        weekday[4] = "Thứ Năm";
        weekday[5] = "Thứ Sáu";
        weekday[6] = "Thứ Bảy";
        var day = weekday[today.getDay()];
        var dd = today.getDate();
        var mm = today.getMonth() + 1;
        var yyyy = today.getFullYear();
        var h = today.getHours();
        var m = today.getMinutes();
        var s = today.getSeconds();
        m = checkTime(m);
        s = checkTime(s);
        nowTime = h + " giờ " + m + " phút " + s + " giây";
        if (dd < 10) {
            dd = '0' + dd
        }
        if (mm < 10) {
            mm = '0' + mm
        }
        today = day + ', ' + dd + '/' + mm + '/' + yyyy;
        tmp = '<span class="date"> ' + today + ' - ' + nowTime +
            '</span>';
        document.getElementById("clock").innerHTML = tmp;
        clocktime = setTimeout("time()", "1000", "Javascript");

        function checkTime(i) {
            if (i < 10) {
                i = "0" + i;
            }
            return i;
        }
    }
</script>
<script>

    function filterData() {

        const startDate = document.getElementById('startDate').value;
        const endDate = document.getElementById('endDate').value;
        const today = moment();
        const sixMonthsAgo = moment().subtract(6, 'months');

        if (startDate && moment(startDate).isAfter(endDate)) {
            showErrorMessage('Ngày bắt đầu không thể lớn hơn ngày kết thúc.');
        } else if (startDate && moment(startDate).isAfter(today)) {
            showErrorMessage('Ngày bắt đầu không thể lớn hơn ngày hiện tại.');
        } else if (endDate && moment(endDate).isAfter(today)) {
            showErrorMessage('Ngày kết thúc không thể lớn hơn ngày hiện tại.');
        } else if (startDate && moment(startDate).isBefore(sixMonthsAgo)) {
            showErrorMessage('Ngày bắt đầu không thể nhỏ hơn 6 tháng so với hiện tại.');
        } else if (endDate && moment(endDate).isBefore(sixMonthsAgo)) {
            showErrorMessage('Ngày kết thúc không thể nhỏ hơn 6 tháng so với hiện tại.');
        } else {
            // Ẩn thông báo lỗi
            document.getElementById('errorMessage').style.display = 'none';
        }
    }

    function showErrorMessage(message) {
        // Hiển thị thông báo lỗi trong giao diện
        const errorMessageElement = document.getElementById('errorMessage');
        errorMessageElement.textContent = message;
        errorMessageElement.style.display = 'block';
    }
</script>
</body>

</html>